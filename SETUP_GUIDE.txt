CODEX CONTAINER - QUICK SETUP GUIDE
====================================

Your isolated Docker environment for OpenAI Codex is ready.

WHAT'S INCLUDED:
----------------
- Alpine Linux-based Docker container
- Node.js and npm pre-installed
- Workspace mounting capability
- Configuration persistence
- User ID mapping for file permissions (when sudo is allowed)
- Bash wrapper script with full functionality
- Docker Compose support
- Optional sudo mode for OS-level installs

INSTALLATION:
-------------
1. Extract the archive to your Docker projects directory:
   cd ~/codeWS/Docker
   tar -xzf codex-container.tar.gz
   cd codex-container

2. Install (user-local recommended):
   make install-user

3. Build the container:
   ./codex-container --build

UNINSTALL:
----------
- User-local: make uninstall-user
- System-wide: make uninstall

USAGE EXAMPLES:
---------------
# Start a persistent runtime container
./codex-container start

# Run Codex in current directory
./codex-container --search

# Open interactive shell
./codex-container shell

# Mount specific workspace
./codex-container -w /path/to/your/project start

# Run npm packages globally (persisted)
./codex-container npm install -g @openai/codex

# Run Node.js scripts
./codex-container exec -- node yourscript.js

# Set OpenAI API key
./codex-container -e OPENAI_API_KEY=sk-your-key --search

# Check status
./codex-container status

# Use sudo/apk (opt-in)
./codex-container --allow-sudo start

OPTIONAL - SYSTEM-WIDE INSTALLATION:
-------------------------------------
make install

Confirm which binary is used:
command -v codex-container

CONFIGURATION:
--------------
Config is stored in: ~/.config/codex-container/config
- Save API key: echo "sk-key" > ~/.config/codex-container/config/openai_key
- Git config is preserved across sessions
- npm global packages are preserved
- pipx installs are preserved under /config/pipx

DOCKER COMPOSE:
---------------
Alternative method using docker compose:
1. Copy .env.example to .env and set CODEX_VERSION
2. Run: docker compose up -d
3. Attach: docker attach codex-container-runtime

FEATURES REFERENCE:
-------------------
- Workspace mounting (-w flag)
- Config persistence (-c flag)
- Container management (start/stop/rm/status)
- Log viewing (logs)
- Environment variables (-e flag)
- Default no-sudo mode with opt-in via --allow-sudo
- Optional host Docker socket access for runtime container (--allow-docker)
- Alpine Linux for minimal size
- Pre-installed development tools

NOTE ON @openai/codex:
-----------------------
The package @openai/codex may not exist publicly or may require
authentication. The container will attempt to install it, but if
it fails, you can:
1. Install other OpenAI packages: npm install openai
2. Use the container for general Node.js development
3. Install any npm package you need

The container is fully functional as an isolated Node.js
development environment regardless of the Codex package status.

TROUBLESHOOTING:
----------------
- Docker not running: Start Docker Desktop/daemon
- Permission denied: Run with --allow-sudo if you need UID mapping
- Port conflicts: Stop other containers or change ports
- Build fails: Check Docker disk space and network

For more details, see the README.md in the extracted directory.
